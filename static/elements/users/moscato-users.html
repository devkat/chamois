<dom-module id="moscato-users">
  <template>

    <header>
      <paper-toolbar>
        <paper-button on-click="addUserAction">Create</paper-button>
      </paper-toolbar>
    </header>

    <section id="main" hidden$="[[users.length === 0]]">
      <ul id="users-list">
        <template  is="dom-repeat" items="{{users}}">
          <li>{{item.email}}</li>
        </template>
      </ul>
    </section>

    <footer hidden$="[[users.length === 0]]">
      <span>[[users.length]]</span> <span>[[users.length === 1 ? 'user' : 'users']]</span>
    </footer>

  </template>
  <script>
    (function() {
      Polymer({
        
        properties: {
          users: {
            type: Array,
            value: [],
            notify: true
          },
          foo: String
        },

        attached: function() {
          var that = this;
          restStore.get('users').done(function() {
            that.set('users', restStore.findAll('users'));
          });
        },

        addUserAction: function() {
          page.redirect('/users/add');
        },
        
        deleteUserAction: function(e, detail) {
          this.model.deleteUser(detail);
        }
      });
    })();
  </script>
</dom-module>
